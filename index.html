<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EZVIZ Live (v8.1.16)</title>

  <!-- B∆∞·ªõc 0: √©p staticPath ƒë√∫ng phi√™n b·∫£n ƒë·ªÉ tr√°nh l√¥i b·∫£n alpha -->
  <script>
    window.EZUIKitConfig = {
      staticPath: "https://openstatic.ys7.com/ezuikit_js/v8.1.16/ezuikit_static"
    };
    // C·∫£nh b√°o n·∫øu ch·∫°y b·∫±ng file://
    if (location.protocol === "file:") {
      alert("H√£y ch·∫°y trang qua HTTP/HTTPS (VD: Live Server) ‚Äî EZUIKit kh√¥ng ch·∫°y v·ªõi file://");
    }
  </script>

  <!-- B∆∞·ªõc 1: n·∫°p ƒë√∫ng SDK 8.1.16 v√† th√™m query ch·ªëng cache -->
  <script src="https://openstatic.ys7.com/ezuikit_js/v8.1.16/ezuikit.js?v=816"></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const APP_KEY      = "704eed1686e1485bbd7c07f40665c471";
    const ACCESS_TOKEN = "at.XXXXXXXX";           // token m·ªõi
    const DEVICE_SN    = "BF0374481";
    const CHANNEL      = 1;
    const VERIFY_CODE  = "TN79797979";            // "" n·∫øu ƒë√£ t·∫Øt m√£ h√≥a

    const ezUrl = VERIFY_CODE
      ? `ezopen://${VERIFY_CODE}@open.ys7.com/${DEVICE_SN}/${CHANNEL}.hd.live`
      : `ezopen://open.ys7.com/${DEVICE_SN}/${CHANNEL}.hd.live`;

    // √âP staticPath t·ªõi b·∫£n b·∫°n t·ª± host (ƒë√∫ng 8.1.16)
    const STATIC_PATH = "https://tanaiot.github.io/ezuikit_static";

    const player = new EZUIKit.EZUIKitPlayer({
      id: 'my-player',
      appKey: APP_KEY,
      accessToken: ACCESS_TOKEN,
      url: ezUrl,
      template: 'simple',
      autoplay: true,
      width: 800,
      height: 450,
      staticPath: STATIC_PATH,                  // üëà quan tr·ªçng
      env: { domain: "https://open.ys7.com" }
    });
  });
</script>
</body>
</html>

